#summary ミドルウェア (6)

= イントロ =

  * 先週のおさらい。
  * 手本の作り方をレクチャー。
  * 課題の回収。

= Texture （テクスチャ） =

  * テクスチャマッピング：面に画像を貼り付けること。
  * 今は、なんでも画像のことは「テクスチャ」というようになってしまった感じが……

=== Unityでテクスチャを使うには ===

画像ファイルをProjectビューにドラッグ＆ドロップするだけ。

= Material （マテリアル） =

  * Material ＝「材質」
  * CGの世界では、面の見た目を決めるデータ構造のこと。

=== Unityでマテリアルを作るには ===

ProjectビューのCreateメニューからMaterialを選ぶ。

= シェーダー =

  * レンダリングに使われる特殊なプログラムの（シェーダープログラム）。
  * シェーダーを入れ替えることによって、様々な見た目を作り出せる。
  * Unityでは[http://unity3d.com/support/documentation/Components/SL-Reference.html 自分でシェーダーを書くこともできる]が、一般的なものはプリセットとして用意されている。

=== Unityでシェーダーを切り替えるには ===

マテリアルを選択してから、Inspectorビューの上部分に表示されるShaderプルダウンを操作する。

= Diffuse （拡散反射） =

  * 最も一般的なシェーダー。物体表面での乱反射のシミュレーション。
  * 鈍い反射を表現する。テカリが無い、ツヤ消し状態の面。
  * 光の方向と面の法線だけで明るさが決まる。

  * テクスチャを1個だけ貼れる。
  * Main Colorで色を操作できる。

  * テクスチャのTilingで、テクスチャをループさせることができる。
  * テクスチャのOffsetで、貼りつけの開始位置を変えることができる（テクスチャスクロール）。

= Specular （鏡面反射） =

  * 物体表面での正反射のシミュレーション。金属などの表面で起こる。
  * 鋭い反射を表現する。テカリが生じる。
  * 光の入射角と視点方向によって明るさが変化する。

  * テクスチャを1個だけ貼れる。
  * Specular Colorでテカリの明るさを、Shininessでテカリの鋭さを操作できる。

= Transparent （透過） =

  * 透明な面を扱うためのもの。
  * メニューの"Transparent"の下にバリエーションが用意されている。例えば"Transparent/Diffuse"なら、Diffuseをベースとして透過するマテリアルになる。
  * 色のアルファチャンネルよって透過率が変化する。
  * アルファチャンネルを持ったテクスチャを使うか、Main Colorでアルファ値を下げるかして、透過させる。

= Decal （デカール付き拡散反射） =

  * テクスチャを同時に2枚貼れるシェーダー。
  * Baseの上にDecalが貼られる。Decalはアルファを含む（透過する）ものでないと意味が無い。
  * いわゆるマルチテクスチャ

= Bumped Diffuse / Bumped Specular （バンプマッピング） =

  * バンプ（凸凹）を表現するシェーダー。
  * バンプはノーマルマップ（法線マップ）によって表現する。
  * 法線マップとは[http://www.google.com/search?q=normal+map&tbm=isch こんなの]。画像のR, G, B値によって法線ベクトルのX, Y, Z成分に偏位を与える。

=== 法線マップの作り方 ===

  * 法線マップを手作業で作るのは難しい。多くの場合、ハイトマップ（高度マップ）から生成される。
  * ハイトマップとは、高さを色の明るさで表したもの。

  * まず、白黒画像を普通にテクスチャとして読み込む。
  * Inspectorビュー上で、Texture ImporterのTexture Typeをnormal mapにする。
  * "Generate from greyscale"をオンにする。

  * 最近はモデルと法線マップを同時に制作するツール（[http://www.youtube.com/watch?v=M5fYgsdrOaA ZBrush等]）も一般的になってきた。

= Parallax Diffuse / Parallax Specular （パララックスマッピング） =

  * バンプマッピングの改良版。
  * バンプマッピングは明るさが凸凹するだけ。パララックスマッピングは、見た目も凸凹させる。
  * 原理的にはバンプマッピングよりも高品質なはず……だが、下手に使っても案外効果は無い。
  * かなり描画負荷が高いので注意。

  * Heightmapにハイトマップを与える必要がある。
  * 法線マップを作るのに使ったハイトマップをそのまま与えればよい。ただし、高さの値をアルファチャンネルに入れる必要がある。これには、Texture Importerにある"Generate Alpha from Greyscale"を使うとよい。

