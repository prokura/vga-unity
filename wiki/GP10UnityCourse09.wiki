#summary ミドルウェア (9)

= モデルデータの使用 =

Unityは色々な3Dツールのデータ形式に対応しているが、迷ったときはとりあえずfbx形式でやりとりしておくのが最も無難と言われる。

  * [http://vga-unity.googlecode.com/files/VantanKun.zip サンプルデータ(VantanKun.zip)]をダウンロードして解凍しておく。

サンプルデータの中にはモデルデータ(!VantanKun.fbx)とテクスチャデータ(!VantanKun.png)が入っている。

== モデルデータの取り込み ==

データを取り込むには、Projectビューにドラッグ＆ドロップするだけ。

  * !VantanKun.fbxと!VantanKun.pngをProjectビューにドラッグ＆ドロップする。

モデルデータを取り込むと、モデルデータが追加されるのと同時に、モデルデータ内に含まれるマテリアルが自動的に作成される。このデータの場合であれば!VantanKunという名前のマテリアル。

マテリアルと同名のテクスチャが存在する場合は、自動的にそのテクスチャがマテリアルに貼られる。

  * マテリアル!VantanKunの設定を確認する。もしテクスチャが貼られていなかったら、!VantanKun.pngをテクスチャに設定する。

Projectビューの中で、モデルデータ!VantanKunは階層を持っているように見える。

  * モデルデータ!VantanKunの階層を開いて中身を見てみる。

モデルデータの中には、階層構造と、メッシュデータと、アニメーションデータが含まれる。!VantanKunの場合は、階層構造のトップである"Pelvis"と、メッシュデータである"Cahracter"と、複数のアニメーションデータが見える。

== シーンへの追加 ==

モデルをシーンに追加するには、モデルデータをSceneビューにドラッグ＆ドロップするだけ。

  * !VantanKunをSceneビューにドラッグ＆ドロップする。

シーンに追加されたモデルは、とりあえずデフォルトのアニメーションが自動再生されるようになっている。

  * 実行して、アニメーションが再生されるのを確認する。

デフォルトアニメーションを変えるには、AnimationコンポーネントにあるAnimationを変更する。

  * シーンに配置した!VantanKunを選択する。
  * Animationコンポーネント内のAnimation項目の横にある丸をクリックする。
  * アニメーション選択ウィンドウが表示されるので、その中から"Walk"を選択する。
  * 実行して、歩くアニメーションが1回だけ再生されるのを確認する。

